(this.webpackJsonpnewssystem=this.webpackJsonpnewssystem||[]).push([[0],{108:function(e,t,n){e.exports={active:"News_active__1ySqz"}},340:function(e,t,n){},341:function(e,t,n){},714:function(e,t,n){},720:function(e,t,n){},821:function(e,t,n){},824:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(51),r=n.n(i),s=(n(340),n(146)),o=n(54),l=n(327),u=n(832),d=n(325),j=n(73),b=n(841),O=n(842),h=(n(341),n(314)),f=n.n(h),p=n(19),m=n.n(p),x=n(7);function g(e){return Object(x.jsxs)("div",{style:{background:"rgb(35, 39, 65)",height:"100%",overflow:"hidden"},children:[Object(x.jsx)(f.a,{height:document.documentElement.clientHeight,params:{background:{color:{value:"rgb(35, 39, 65)"},position:"50% 50%",repeat:"no-repeat",size:"cover"},fullScreen:{enable:!0,zIndex:1},interactivity:{events:{onClick:{enable:!0,mode:"push"},onHover:{enable:!0,mode:"bubble",parallax:{force:60}}},modes:{bubble:{distance:400,duration:2,opacity:1,size:40},grab:{distance:400}}},particles:{color:{value:"#ffffff"},links:{color:{value:"#fff"},distance:150,opacity:.4},move:{attract:{rotate:{x:600,y:1200}},enable:!0,outModes:{default:"bounce",bottom:"bounce",left:"bounce",right:"bounce",top:"bounce"},speed:6},number:{density:{enable:!0},value:170},opacity:{animation:{speed:1,minimumValue:.1}},shape:{options:{character:{fill:!1,font:"Verdana",style:"",value:"*",weight:"400"},char:{fill:!1,font:"Verdana",style:"",value:"*",weight:"400"},polygon:{nb_sides:5},star:{nb_sides:5},image:{height:32,replace_color:!0,src:"/logo192.png",width:32},images:{height:32,replace_color:!0,src:"/logo192.png",width:32}},type:"image"},size:{value:16,animation:{speed:40,minimumValue:.1}},stroke:{color:{value:"#000000",animation:{h:{count:0,enable:!1,offset:0,speed:1,sync:!0},s:{count:0,enable:!1,offset:0,speed:1,sync:!0},l:{count:0,enable:!1,offset:0,speed:1,sync:!0}}}}}}}),Object(x.jsxs)("div",{className:"formContainer",children:[Object(x.jsx)("div",{className:"logintitle",children:"\u5168\u7403\u65b0\u95fb\u53d1\u5e03\u7ba1\u7406\u7cfb\u7edf"}),Object(x.jsxs)(u.a,{name:"normal_login",className:"login-form",onFinish:function(t){console.log(t),m.a.get("/users?username=".concat(t.username,"&password=").concat(t.password,"&roleState=true&_expand=role")).then((function(t){console.log(t.data),0===t.data.length?l.b.error("\u7528\u6237\u540d\u6216\u5bc6\u7801\u4e0d\u5339\u914d"):(localStorage.setItem("token",JSON.stringify(t.data[0])),e.history.push("/"))}))},children:[Object(x.jsx)(u.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(x.jsx)(d.a,{prefix:Object(x.jsx)(b.a,{className:"site-form-item-icon"}),placeholder:"Username"})}),Object(x.jsx)(u.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(x.jsx)(d.a,{prefix:Object(x.jsx)(O.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})}),Object(x.jsx)(u.a.Item,{children:Object(x.jsx)(j.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"\u767b\u5f55"})})]})]})]})}var v=n(4),y=n(5),S=n(834),w=n(837),I=n(152),k=n.n(I),C=n(843);function N(e){var t=Object(a.useState)(null),n=Object(y.a)(t,2),c=n[0],i=n[1];Object(a.useEffect)((function(){m.a.get("/news/".concat(e.match.params.id,"?_expand=category&_expand=role")).then((function(e){return i(Object(v.a)(Object(v.a)({},e.data),{},{view:e.data.view+1})),e.data})).then((function(t){m.a.patch("/news/".concat(e.match.params.id),{view:t.view+1})}))}),[e.match.params.id]);return Object(x.jsx)("div",{children:c&&Object(x.jsxs)("div",{children:[Object(x.jsx)(S.a,{onBack:function(){return window.history.back()},title:c.title,subTitle:Object(x.jsxs)("div",{children:[c.category.title,Object(x.jsx)(C.a,{twoToneColor:"#eb2f96",onClick:function(){return i(Object(v.a)(Object(v.a)({},c),{},{star:c.star+1})),void m.a.patch("/news/".concat(e.match.params.id),{star:c.star+1})}})]}),children:Object(x.jsxs)(w.b,{size:"small",column:3,children:[Object(x.jsx)(w.b.Item,{label:"\u521b\u5efa\u8005",children:c.author}),Object(x.jsx)(w.b.Item,{label:"\u53d1\u5e03\u65f6\u95f4",children:c.publishTime?k()(c.publishTime).format("YYYY/MM/DD HH:mm:ss"):"-"}),Object(x.jsx)(w.b.Item,{label:"\u533a\u57df",children:c.region}),Object(x.jsx)(w.b.Item,{label:"\u8bbf\u95ee\u6570\u91cf",children:c.view}),Object(x.jsx)(w.b.Item,{label:"\u70b9\u8d5e\u6570\u91cf",children:c.star}),Object(x.jsx)(w.b.Item,{label:"\u8bc4\u8bba\u6570\u91cf",children:"0"})]})}),Object(x.jsx)("div",{dangerouslySetInnerHTML:{__html:c.content},style:{margin:"0 24px",border:"1px solid gray"}})]})})}var _=n(153),E=n.n(_),T=n(139),z=n(85),R=n(831),D=n(838);function L(){var e=Object(a.useState)([]),t=Object(y.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){m.a.get("/news?publishState=2&_expand=category").then((function(e){c(Object.entries(E.a.groupBy(e.data,(function(e){return e.category.title}))))}))}),[]),Object(x.jsxs)("div",{style:{width:"95%",margin:"0 auto"},children:[Object(x.jsx)(S.a,{className:"site-page-header",title:"\u5168\u7403\u5927\u65b0\u95fb",subTitle:"\u67e5\u770b\u65b0\u95fb"}),",",Object(x.jsx)("div",{className:"site-card-wrapper",children:Object(x.jsx)(T.a,{gutter:[16,16],children:n.map((function(e){return Object(x.jsx)(z.a,{span:8,children:Object(x.jsx)(R.a,{title:e[0],bordered:!0,hoverable:!0,children:Object(x.jsx)(D.b,{size:"small",dataSource:e[1],pagination:{pageSize:3},renderItem:function(e){return Object(x.jsx)(D.b.Item,{children:Object(x.jsx)("a",{href:"#/detail/".concat(e.id),children:e.title})})}})})},e[0])}))})})]})}var P=n(829),q=n(94),J=(n(714),n(104)),F=P.a.Sider,H=q.a.SubMenu,B={"/home":Object(x.jsx)(b.a,{}),"/user-manage":Object(x.jsx)(b.a,{}),"/user-manage/list":Object(x.jsx)(b.a,{}),"/right-manage":Object(x.jsx)(b.a,{}),"/right-manage/role/list":Object(x.jsx)(b.a,{}),"/right-manage/right/list":Object(x.jsx)(b.a,{})};var Y=Object(J.b)((function(e){return{isCollapsed:e.CollApsedReducer.isCollapsed}}))(Object(o.g)((function(e){var t=Object(a.useState)([]),n=Object(y.a)(t,2),c=n[0],i=n[1];Object(a.useEffect)((function(){m.a.get("/rights?_embed=children").then((function(e){console.log(e.data),i(e.data)}))}),[]);var r=JSON.parse(localStorage.getItem("token")).role.rights,s=function(e){return e.pagepermisson&&r.includes(e.key)},o=[e.location.pathname],l=["/"+e.location.pathname.split("/")[1]];return Object(x.jsx)(F,{trigger:null,collapsible:!0,collapsed:e.isCollapsed,children:Object(x.jsxs)("div",{style:{display:"flex",height:"100%",flexDirection:"column"},children:[Object(x.jsx)("div",{className:"logo",children:"\u5168\u7403\u65b0\u95fb\u53d1\u5e03\u7ba1\u7406\u7cfb\u7edf"}),Object(x.jsx)("div",{style:{flex:1,overflow:"auto"},children:Object(x.jsx)(q.a,{theme:"dark",mode:"inline",selectedKeys:o,className:"aaaaaaa",defaultOpenKeys:l,children:function t(n){return n.map((function(n){var a;return(null===(a=n.children)||void 0===a?void 0:a.length)>0&&s(n)?Object(x.jsx)(H,{icon:B[n.key],title:n.title,children:t(n.children)},n.key):s(n)&&Object(x.jsx)(q.a.Item,{icon:B[n.key],onClick:function(){e.history.push(n.key)},children:n.title},n.key)}))}(c)})})]})})}))),M=n(194),K=n(328),A=n(844),V=n(845),U=P.a.Header;var X=Object(J.b)((function(e){return{isCollapsed:e.CollApsedReducer.isCollapsed}}),{changeCollapsed:function(){return{type:"change_collapsed"}}})(Object(o.g)((function(e){var t=function(){e.changeCollapsed()},n=JSON.parse(localStorage.getItem("token")),a=n.role.roleName,c=n.username,i=Object(x.jsxs)(q.a,{children:[Object(x.jsx)(q.a.Item,{children:a}),Object(x.jsx)(q.a.Item,{danger:!0,onClick:function(){localStorage.removeItem("token"),e.history.replace("/login")},children:"\u9000\u51fa"})]});return Object(x.jsxs)(U,{className:"site-layout-background",style:{padding:"0 16px"},children:[e.isCollapsed?Object(x.jsx)(A.a,{onClick:t}):Object(x.jsx)(V.a,{onClick:t}),Object(x.jsxs)("div",{style:{float:"right"},children:[Object(x.jsxs)("span",{children:["\u6b22\u8fce",Object(x.jsx)("span",{style:{color:"#1890ff"},children:c}),"\u56de\u6765"]}),Object(x.jsx)(M.a,{overlay:i,children:Object(x.jsx)(K.a,{size:"large",icon:Object(x.jsx)(b.a,{})})})]})]})}))),W=n(233),G=n.n(W),Q=(n(719),n(720),n(8)),Z=n(836),$=n(846),ee=n(847),te=n(136),ne=n(235),ae=R.a.Meta;function ce(){return Object(x.jsx)("div",{children:"403  Nopermission"})}var ie=n(835),re=n(839),se=n(332),oe=n(840),le=n(830),ue=n(848),de=n(156),je=ie.a.confirm;var be=n(324),Oe=ie.a.confirm;var he=n(155),fe=he.a.Option,pe=Object(a.forwardRef)((function(e,t){var n=Object(a.useState)(!1),c=Object(y.a)(n,2),i=c[0],r=c[1];Object(a.useEffect)((function(){r(e.isUpdateDisabled)}),[e.isUpdateDisabled]);var s=JSON.parse(localStorage.getItem("token")),o=s.roleId,l=s.region,j={1:"superadmin",2:"admin",3:"editor"},b=function(t){return e.isUpdate?"superadmin"!==j[o]:"superadmin"!==j[o]&&t.value!==l},O=function(t){return e.isUpdate?"superadmin"!==j[o]:"superadmin"!==j[o]&&"editor"!==j[t.id]};return Object(x.jsxs)(u.a,{ref:t,layout:"vertical",children:[Object(x.jsx)(u.a.Item,{name:"username",label:"\u7528\u6237\u540d",rules:[{required:!0,message:"Please input the title of collection!"}],children:Object(x.jsx)(d.a,{})}),Object(x.jsx)(u.a.Item,{name:"password",label:"\u5bc6\u7801",rules:[{required:!0,message:"Please input the title of collection!"}],children:Object(x.jsx)(d.a,{})}),Object(x.jsx)(u.a.Item,{name:"region",label:"\u533a\u57df",rules:i?[]:[{required:!0,message:"Please input the title of collection!"}],children:Object(x.jsx)(he.a,{disabled:i,children:e.regionList.map((function(e){return Object(x.jsx)(fe,{value:e.value,disabled:b(e),children:e.title},e.id)}))})}),Object(x.jsx)(u.a.Item,{name:"roleId",label:"\u89d2\u8272",rules:[{required:!0,message:"Please input the title of collection!"}],children:Object(x.jsx)(he.a,{onChange:function(e){1===e?(r(!0),t.current.setFieldsValue({region:""})):r(!1)},children:e.roleList.map((function(e){return Object(x.jsx)(fe,{value:e.id,disabled:O(e),children:e.roleName},e.id)}))})})]})})),me=ie.a.confirm;var xe=n(833),ge=n(331),ve=n(108),ye=n.n(ve),Se=n(319),we=n(130),Ie=n(320),ke=n.n(Ie),Ce=n(321),Ne=n.n(Ce);n(820);function _e(e){Object(a.useEffect)((function(){var t=e.content;if(void 0!==t){var n=Ne()(t);if(n){var a=we.ContentState.createFromBlockArray(n.contentBlocks),c=we.EditorState.createWithContent(a);i(c)}}}),[e.content]);var t=Object(a.useState)(""),n=Object(y.a)(t,2),c=n[0],i=n[1];return Object(x.jsx)("div",{children:Object(x.jsx)(Se.Editor,{editorState:c,toolbarClassName:"aaaaa",wrapperClassName:"bbbbb",editorClassName:"ccccc",onEditorStateChange:function(e){return i(e)},onBlur:function(){e.getContent(ke()(Object(we.convertToRaw)(c.getCurrentContent())))}})})}var Ee=xe.a.Step,Te=he.a.Option;var ze=n(849),Re=ie.a.confirm;var De=n(100),Le=n(2),Pe=n(11),qe=n(21),Je=n.n(qe),Fe=["index"],He=["title","editable","children","dataIndex","record","handleSave"],Be=ie.a.confirm;function Ye(e){var t=[{title:"\u65b0\u95fb\u6807\u9898",dataIndex:"title",render:function(e,t){return Object(x.jsx)("a",{href:"#/news-manage/preview/".concat(t.id),children:e})}},{title:"\u4f5c\u8005",dataIndex:"author"},{title:"\u65b0\u95fb\u5206\u7c7b",dataIndex:"category",render:function(e){return Object(x.jsx)("div",{children:e.title})}},{title:"\u64cd\u4f5c",render:function(t){return Object(x.jsx)("div",{children:e.button(t.id)})}}];return Object(x.jsx)("div",{children:Object(x.jsx)(le.a,{dataSource:e.dataSource,columns:t,pagination:{pageSize:5},rowKey:function(e){return e.id}})})}var Me=function(e){var t=JSON.parse(localStorage.getItem("token")).username,n=Object(a.useState)([]),c=Object(y.a)(n,2),i=c[0],r=c[1];return Object(a.useEffect)((function(){m()("/news?author=".concat(t,"&publishState=").concat(e,"&_expand=category")).then((function(e){r(e.data)}))}),[t,e]),{dataSource:i,handlePublish:function(e){r(i.filter((function(t){return t.id!==e}))),m.a.patch("/news/".concat(e),{publishState:2,publishTime:Date.now()}).then((function(e){ge.a.info({message:"\u901a\u77e5",description:"\u60a8\u53ef\u4ee5\u5230\u3010\u53d1\u5e03\u7ba1\u7406/\u5df2\u7ecf\u53d1\u5e03\u3011\u4e2d\u67e5\u770b\u60a8\u7684\u65b0\u95fb",placement:"bottomRight"})}))},handleSunset:function(e){r(i.filter((function(t){return t.id!==e}))),m.a.patch("/news/".concat(e),{publishState:3}).then((function(e){ge.a.info({message:"\u901a\u77e5",description:"\u60a8\u53ef\u4ee5\u5230\u3010\u53d1\u5e03\u7ba1\u7406/\u5df2\u4e0b\u7ebf\u3011\u4e2d\u67e5\u770b\u60a8\u7684\u65b0\u95fb",placement:"bottomRight"})}))},handleDelete:function(e){r(i.filter((function(t){return t.id!==e}))),m.a.delete("/news/".concat(e)).then((function(e){ge.a.info({message:"\u901a\u77e5",description:"\u60a8\u5df2\u7ecf\u5220\u9664\u4e86\u5df2\u4e0b\u7ebf\u7684\u65b0\u95fb",placement:"bottomRight"})}))}}};var Ke=xe.a.Step,Ae=he.a.Option;var Ve=n(192),Ue={"/home":function(){var e=Object(a.useState)([]),t=Object(y.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)([]),r=Object(y.a)(i,2),s=r[0],o=r[1],l=Object(a.useState)([]),u=Object(y.a)(l,2),d=u[0],j=u[1],b=Object(a.useState)(!1),O=Object(y.a)(b,2),h=O[0],f=O[1],p=Object(a.useState)(null),g=Object(y.a)(p,2),v=g[0],S=g[1],w=Object(a.useRef)(),I=Object(a.useRef)();Object(a.useEffect)((function(){m.a.get("/news?publishState=2&_expand=category&_sort=view&_order=desc&_limit=6").then((function(e){c(e.data)}))}),[]),Object(a.useEffect)((function(){m.a.get("/news?publishState=2&_expand=category&_sort=star&_order=desc&_limit=6").then((function(e){o(e.data)}))}),[]),Object(a.useEffect)((function(){return m.a.get("/news?publishState=2&_expand=category").then((function(e){k(E.a.groupBy(e.data,(function(e){return e.category.title}))),j(e.data)})),function(){window.onresize=null}}),[]);var k=function(e){var t=ne.a(w.current),n={title:{text:"\u65b0\u95fb\u5206\u7c7b\u56fe\u793a"},tooltip:{},legend:{data:["\u6570\u91cf"]},xAxis:{data:Object.keys(e),axisLabel:{rotate:"45",interval:0}},yAxis:{minInterval:1},series:[{name:"\u6570\u91cf",type:"bar",data:Object.values(e).map((function(e){return e.length}))}]};t.setOption(n),window.onresize=function(){t.resize()}},C=JSON.parse(localStorage.getItem("token")),N=C.username,_=C.region,L=C.role.roleName;return Object(x.jsxs)("div",{className:"site-card-wrapper",children:[Object(x.jsxs)(T.a,{gutter:16,children:[Object(x.jsx)(z.a,{span:8,children:Object(x.jsx)(R.a,{title:"\u7528\u6237\u6700\u5e38\u6d4f\u89c8",bordered:!0,children:Object(x.jsx)(D.b,{size:"small",dataSource:n,renderItem:function(e){return Object(x.jsx)(D.b.Item,{children:Object(x.jsx)("a",{href:"#/news-manage/preview/".concat(e.id),children:e.title})})}})})}),Object(x.jsx)(z.a,{span:8,children:Object(x.jsx)(R.a,{title:"\u7528\u6237\u70b9\u8d5e\u6700\u591a",bordered:!0,children:Object(x.jsx)(D.b,{size:"small",dataSource:s,renderItem:function(e){return Object(x.jsx)(D.b.Item,{children:Object(x.jsx)("a",{href:"#/news-manage/preview/".concat(e.id),children:e.title})})}})})}),Object(x.jsx)(z.a,{span:8,children:Object(x.jsx)(R.a,{cover:Object(x.jsx)("img",{alt:"example",src:"https://gw.alipayobjects.com/zos/rmsportal/JiqGstEfoWAOHiTxclqi.png"}),actions:[Object(x.jsx)($.a,{onClick:function(){setTimeout((function(){f(!0),function(e){var t,n,a=d.filter((function(e){return e.author===N})),c=E.a.groupBy(a,(function(e){return e.category.title})),i=[];for(var r in c)i.push({name:r,value:c[r].length});v?t=v:(t=ne.a(I.current),S(t)),(n={title:{text:"\u5f53\u524d\u7528\u6237\u65b0\u95fb\u5206\u7c7b\u56fe\u793a",left:"center"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{name:"\u53d1\u5e03\u6570\u91cf",type:"pie",radius:"50%",data:i,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})&&t.setOption(n)}()}),0)}},"setting"),Object(x.jsx)(ee.a,{},"edit"),Object(x.jsx)(te.a,{},"ellipsis")],children:Object(x.jsx)(ae,{avatar:Object(x.jsx)(K.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:N,description:Object(x.jsxs)("div",{children:[Object(x.jsx)("b",{children:_||"\u5168\u7403"}),Object(x.jsx)("span",{style:{paddingLeft:"30px"},children:L})]})})})})]}),Object(x.jsx)(Z.a,{width:"500px",title:"\u4e2a\u4eba\u65b0\u95fb\u5206\u7c7b",placement:"right",closable:!0,onClose:function(){f(!1)},visible:h,children:Object(x.jsx)("div",{ref:I,style:{width:"100%",height:"400px",marginTop:"30px"}})}),Object(x.jsx)("div",{ref:w,style:{width:"100%",height:"400px",marginTop:"30px"}})]})},"/user-manage/list":function(){var e=Object(a.useState)([]),t=Object(y.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!1),r=Object(y.a)(i,2),s=r[0],o=r[1],l=Object(a.useState)(!1),u=Object(y.a)(l,2),d=u[0],b=u[1],O=Object(a.useState)([]),h=Object(y.a)(O,2),f=h[0],p=h[1],g=Object(a.useState)([]),S=Object(y.a)(g,2),w=S[0],I=S[1],k=Object(a.useState)(null),C=Object(y.a)(k,2),N=C[0],_=C[1],E=Object(a.useState)(!1),T=Object(y.a)(E,2),z=T[0],R=T[1],D=Object(a.useRef)(null),L=Object(a.useRef)(null),P=JSON.parse(localStorage.getItem("token")),q=P.roleId,J=P.region,F=P.username;Object(a.useEffect)((function(){var e={1:"superadmin",2:"admin",3:"editor"};m.a.get("/users?_expand=role").then((function(t){var n=t.data;c("superadmin"===e[q]?n:[].concat(Object(Q.a)(n.filter((function(e){return e.username===F}))),Object(Q.a)(n.filter((function(t){return t.region===J&&"editor"===e[t.roleId]})))))}))}),[q,J,F]),Object(a.useEffect)((function(){m.a.get("/regions").then((function(e){var t=e.data;I(t)}))}),[]),Object(a.useEffect)((function(){m.a.get("/roles").then((function(e){var t=e.data;p(t)}))}),[]);var H=[{title:"\u533a\u57df",dataIndex:"region",filters:[].concat(Object(Q.a)(w.map((function(e){return{text:e.title,value:e.value}}))),[{text:"\u5168\u7403",value:"\u5168\u7403"}]),onFilter:function(e,t){return"\u5168\u7403"===e?""===t.region:t.region===e},render:function(e){return Object(x.jsx)("b",{children:""===e?"\u5168\u7403":e})}},{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"role",render:function(e){return null===e||void 0===e?void 0:e.roleName}},{title:"\u7528\u6237\u540d",dataIndex:"username"},{title:"\u7528\u6237\u72b6\u6001",dataIndex:"roleState",render:function(e,t){return Object(x.jsx)(oe.a,{checked:e,disabled:t.default,onChange:function(){return Y(t)}})}},{title:"\u64cd\u4f5c",render:function(e){return Object(x.jsxs)("div",{children:[Object(x.jsx)(j.a,{danger:!0,shape:"circle",icon:Object(x.jsx)(ue.a,{}),onClick:function(){return M(e)},disabled:e.default}),Object(x.jsx)(j.a,{type:"primary",shape:"circle",icon:Object(x.jsx)(ee.a,{}),disabled:e.default,onClick:function(){return B(e)}})]})}}],B=function(e){setTimeout((function(){b(!0),1===e.roleId?R(!0):R(!1),L.current.setFieldsValue(e)}),0),_(e)},Y=function(e){e.roleState=!e.roleState,c(Object(Q.a)(n)),m.a.patch("/users/".concat(e.id),{roleState:e.roleState})},M=function(e){me({title:"\u4f60\u786e\u5b9a\u8981\u5220\u9664?",icon:Object(x.jsx)(de.a,{}),onOk:function(){K(e)},onCancel:function(){}})},K=function(e){c(n.filter((function(t){return t.id!==e.id}))),m.a.delete("/users/".concat(e.id))};return Object(x.jsxs)("div",{children:[Object(x.jsx)(j.a,{type:"primary",onClick:function(){o(!0)},children:"\u6dfb\u52a0\u7528\u6237"}),Object(x.jsx)(le.a,{dataSource:n,columns:H,pagination:{pageSize:5},rowKey:function(e){return e.id}}),Object(x.jsx)(ie.a,{visible:s,title:"\u6dfb\u52a0\u7528\u6237",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onCancel:function(){o(!1)},onOk:function(){D.current.validateFields().then((function(e){o(!1),D.current.resetFields(),m.a.post("/users",Object(v.a)(Object(v.a)({},e),{},{roleState:!0,default:!1})).then((function(t){console.log(t.data),c([].concat(Object(Q.a)(n),[Object(v.a)(Object(v.a)({},t.data),{},{role:f.filter((function(t){return t.id===e.roleId}))[0]})]))}))})).catch((function(e){console.log(e)}))},children:Object(x.jsx)(pe,{regionList:w,roleList:f,ref:D})}),Object(x.jsx)(ie.a,{visible:d,title:"\u66f4\u65b0\u7528\u6237",okText:"\u66f4\u65b0",cancelText:"\u53d6\u6d88",onCancel:function(){b(!1),R(!z)},onOk:function(){L.current.validateFields().then((function(e){b(!1),c(n.map((function(t){return t.id===N.id?Object(v.a)(Object(v.a)(Object(v.a)({},t),e),{},{role:f.filter((function(t){return t.id===e.roleId}))[0]}):t}))),R(!z),m.a.patch("/users/".concat(N.id),e)}))},children:Object(x.jsx)(pe,{regionList:w,roleList:f,ref:L,isUpdateDisabled:z,isUpdate:!0})})]})},"/right-manage/role/list":function(){var e=Object(a.useState)([]),t=Object(y.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)([]),r=Object(y.a)(i,2),s=r[0],o=r[1],l=Object(a.useState)([]),u=Object(y.a)(l,2),d=u[0],b=u[1],O=Object(a.useState)(0),h=Object(y.a)(O,2),f=h[0],p=h[1],g=Object(a.useState)(!1),S=Object(y.a)(g,2),w=S[0],I=S[1],k=[{title:"ID",dataIndex:"id",render:function(e){return Object(x.jsx)("b",{children:e})}},{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"roleName"},{title:"\u64cd\u4f5c",render:function(e){return Object(x.jsxs)("div",{children:[Object(x.jsx)(j.a,{danger:!0,shape:"circle",icon:Object(x.jsx)(ue.a,{}),onClick:function(){return C(e)}}),Object(x.jsx)(j.a,{type:"primary",shape:"circle",icon:Object(x.jsx)(ee.a,{}),onClick:function(){I(!0),b(e.rights),p(e.id)}})]})}}],C=function(e){Oe({title:"\u4f60\u786e\u5b9a\u8981\u5220\u9664?",icon:Object(x.jsx)(de.a,{}),onOk:function(){N(e)},onCancel:function(){}})},N=function(e){c(n.filter((function(t){return t.id!==e.id}))),m.a.delete("/roles/".concat(e.id))};return Object(a.useEffect)((function(){m.a.get("/roles").then((function(e){c(e.data)}))}),[]),Object(a.useEffect)((function(){m.a.get("/rights?_embed=children").then((function(e){o(e.data)}))}),[]),Object(x.jsxs)("div",{children:[Object(x.jsx)(le.a,{dataSource:n,columns:k,rowKey:function(e){return e.id}}),Object(x.jsx)(ie.a,{title:"\u6743\u9650\u5206\u914d",visible:w,onOk:function(){console.log(d,f),I(!1),c(n.map((function(e){return e.id===f?Object(v.a)(Object(v.a)({},e),{},{rights:d}):e}))),m.a.patch("/roles/".concat(f),{rights:d})},onCancel:function(){I(!1)},children:Object(x.jsx)(be.a,{checkable:!0,checkedKeys:d,onCheck:function(e){b(e.checked)},checkStrictly:!0,treeData:s})})]})},"/right-manage/right/list":function(){var e=Object(a.useState)([]),t=Object(y.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){m.a.get("/rights?_embed=children").then((function(e){var t=e.data;t.forEach((function(e){0===e.children.length&&(e.children="")})),c(t)}))}),[]);var i=[{title:"ID",dataIndex:"id",render:function(e){return Object(x.jsx)("b",{children:e})}},{title:"\u6743\u9650\u540d\u79f0",dataIndex:"title"},{title:"\u6743\u9650\u8def\u5f84",dataIndex:"key",render:function(e){return Object(x.jsx)(re.a,{color:"orange",children:e})}},{title:"\u64cd\u4f5c",render:function(e){return Object(x.jsxs)("div",{children:[Object(x.jsx)(j.a,{danger:!0,shape:"circle",icon:Object(x.jsx)(ue.a,{}),onClick:function(){return s(e)}}),Object(x.jsx)(se.a,{content:Object(x.jsx)("div",{style:{textAlign:"center"},children:Object(x.jsx)(oe.a,{checked:e.pagepermisson,onChange:function(){return r(e)}})}),title:"\u9875\u9762\u914d\u7f6e\u9879",trigger:void 0===e.pagepermisson?"":"click",children:Object(x.jsx)(j.a,{type:"primary",shape:"circle",icon:Object(x.jsx)(ee.a,{}),disabled:void 0===e.pagepermisson})})]})}}],r=function(e){e.pagepermisson=1===e.pagepermisson?0:1,c(Object(Q.a)(n)),1===e.grade?m.a.patch("/rights/".concat(e.id),{pagepermisson:e.pagepermisson}):m.a.patch("/children/".concat(e.id),{pagepermisson:e.pagepermisson})},s=function(e){je({title:"\u4f60\u786e\u5b9a\u8981\u5220\u9664?",icon:Object(x.jsx)(de.a,{}),onOk:function(){o(e)},onCancel:function(){}})},o=function(e){if(1===e.grade)c(n.filter((function(t){return t.id!==e.id}))),m.a.delete("/rights/".concat(e.id));else{var t=n.filter((function(t){return t.id===e.rightId}));t[0].children=t[0].children.filter((function(t){return t.id!==e.id})),c(Object(Q.a)(n)),m.a.delete("/children/".concat(e.id))}};return Object(x.jsx)("div",{children:Object(x.jsx)(le.a,{dataSource:n,columns:i,pagination:{pageSize:5}})})},"/news-manage/add":function(e){var t=Object(a.useState)(0),n=Object(y.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)([]),s=Object(y.a)(r,2),o=s[0],b=s[1],O=Object(a.useState)({}),h=Object(y.a)(O,2),f=h[0],p=h[1],g=Object(a.useState)(""),w=Object(y.a)(g,2),I=w[0],k=w[1],C=JSON.parse(localStorage.getItem("token")),N=Object(a.useRef)(null);Object(a.useEffect)((function(){m.a.get("/categories").then((function(e){b(e.data)}))}),[]);var _=function(t){m.a.post("/news",Object(v.a)(Object(v.a)({},f),{},{content:I,region:C.region?C.region:"\u5168\u7403",author:C.username,roleId:C.roleId,auditState:t,publishState:0,createTime:Date.now(),star:0,view:0})).then((function(n){e.history.push(0===t?"/news-manage/draft":"/audit-manage/list"),ge.a.info({message:"\u901a\u77e5",description:"\u60a8\u53ef\u4ee5\u5230".concat(0===t?"\u8349\u7a3f\u7bb1":"\u5ba1\u6838\u5217\u8868","\u4e2d\u67e5\u770b\u60a8\u7684\u65b0\u95fb"),placement:"bottomRight"})}))};return Object(x.jsxs)("div",{children:[Object(x.jsx)(S.a,{className:"site-page-header",title:"\u64b0\u5199\u65b0\u95fb",subTitle:"This is a subtitle"}),Object(x.jsxs)(xe.a,{current:c,children:[Object(x.jsx)(Ee,{title:"\u57fa\u672c\u4fe1\u606f",description:"\u65b0\u95fb\u6807\u9898\uff0c\u65b0\u95fb\u5206\u7c7b"}),Object(x.jsx)(Ee,{title:"\u65b0\u95fb\u5185\u5bb9",description:"\u65b0\u95fb\u4e3b\u4f53\u5185\u5bb9"}),Object(x.jsx)(Ee,{title:"\u65b0\u95fb\u63d0\u4ea4",description:"\u4fdd\u5b58\u8349\u7a3f\u6216\u8005\u63d0\u4ea4\u5ba1\u6838"})]}),Object(x.jsxs)("div",{style:{marginTop:"50px"},children:[Object(x.jsx)("div",{className:0===c?"":ye.a.active,children:Object(x.jsxs)(u.a,Object(v.a)(Object(v.a)({},{labelCol:{span:4},wrapperCol:{span:20}}),{},{name:"basic",ref:N,children:[Object(x.jsx)(u.a.Item,{label:"\u65b0\u95fb\u6807\u9898",name:"title",rules:[{required:!0,message:"Please input your username!"}],children:Object(x.jsx)(d.a,{})}),Object(x.jsx)(u.a.Item,{label:"\u65b0\u95fb\u5206\u7c7b",name:"categoryId",rules:[{required:!0,message:"Please input your username!"}],children:Object(x.jsx)(he.a,{children:o.map((function(e){return Object(x.jsx)(Te,{value:e.id,children:e.title},e.id)}))})})]}))}),Object(x.jsx)("div",{className:1===c?"":ye.a.active,children:Object(x.jsx)(_e,{getContent:function(e){k(e)}})}),Object(x.jsx)("div",{className:2===c?"":ye.a.active})]}),Object(x.jsxs)("div",{style:{marginTop:"50px"},children:[2===c&&Object(x.jsxs)("span",{children:[Object(x.jsx)(j.a,{type:"primary",onClick:function(){return _(0)},children:"\u4fdd\u5b58\u8349\u7a3f\u7bb1"}),Object(x.jsx)(j.a,{danger:!0,onClick:function(){return _(1)},children:"\u63d0\u4ea4\u5ba1\u6838"})]}),c<2&&Object(x.jsx)(j.a,{type:"primary",onClick:function(){0===c?N.current.validateFields().then((function(e){p(e),i(c+1)})).catch((function(e){console.log(e)})):""===I||"<p></p>"===I.trim()?l.b.error("\u65b0\u95fb\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"):i(c+1)},children:"\u4e0b\u4e00\u6b65"}),c>0&&Object(x.jsx)(j.a,{onClick:function(){i(c-1)},children:"\u4e0a\u4e00\u6b65"})]})]})},"/news-manage/draft":function(e){var t=Object(a.useState)([]),n=Object(y.a)(t,2),c=n[0],i=n[1],r=JSON.parse(localStorage.getItem("token")).username;Object(a.useEffect)((function(){m.a.get("/news?author=".concat(r,"&auditState=0&_expand=category")).then((function(e){var t=e.data;i(t)}))}),[r]);var s=[{title:"ID",dataIndex:"id",render:function(e){return Object(x.jsx)("b",{children:e})}},{title:"\u65b0\u95fb\u6807\u9898",dataIndex:"title",render:function(e,t){return Object(x.jsx)("a",{href:"#/news-manage/preview/".concat(t.id),children:e})}},{title:"\u4f5c\u8005",dataIndex:"author"},{title:"\u5206\u7c7b",dataIndex:"category",render:function(e){return e.title}},{title:"\u64cd\u4f5c",render:function(t){return Object(x.jsxs)("div",{children:[Object(x.jsx)(j.a,{danger:!0,shape:"circle",icon:Object(x.jsx)(ue.a,{}),onClick:function(){return l(t)}}),Object(x.jsx)(j.a,{shape:"circle",icon:Object(x.jsx)(ee.a,{}),onClick:function(){e.history.push("/news-manage/update/".concat(t.id))}}),Object(x.jsx)(j.a,{type:"primary",shape:"circle",icon:Object(x.jsx)(ze.a,{}),onClick:function(){return o(t.id)}})]})}}],o=function(t){m.a.patch("/news/".concat(t),{auditState:1}).then((function(t){e.history.push("/audit-manage/list"),ge.a.info({message:"\u901a\u77e5",description:"\u60a8\u53ef\u4ee5\u5230".concat("\u5ba1\u6838\u5217\u8868","\u4e2d\u67e5\u770b\u60a8\u7684\u65b0\u95fb"),placement:"bottomRight"})}))},l=function(e){Re({title:"\u4f60\u786e\u5b9a\u8981\u5220\u9664?",icon:Object(x.jsx)(de.a,{}),onOk:function(){u(e)},onCancel:function(){}})},u=function(e){i(c.filter((function(t){return t.id!==e.id}))),m.a.delete("/news/".concat(e.id))};return Object(x.jsx)("div",{children:Object(x.jsx)(le.a,{dataSource:c,columns:s,pagination:{pageSize:5},rowKey:function(e){return e.id}})})},"/news-manage/category":function(){var e=Object(a.useState)([]),t=Object(y.a)(e,2),n=t[0],i=t[1];Object(a.useEffect)((function(){m.a.get("/categories").then((function(e){i(e.data)}))}),[]);var r=function(e){i(n.map((function(t){return t.id===e.id?{id:t.id,title:e.title,value:e.title}:t}))),m.a.patch("/categories/".concat(e.id),{title:e.title,value:e.title})},s=[{title:"ID",dataIndex:"id",render:function(e){return Object(x.jsx)("b",{children:e})}},{title:"\u680f\u76ee\u540d\u79f0",dataIndex:"title",onCell:function(e){return{record:e,editable:!0,dataIndex:"title",title:"\u680f\u76ee\u540d\u79f0",handleSave:r}}},{title:"\u64cd\u4f5c",render:function(e){return Object(x.jsx)("div",{children:Object(x.jsx)(j.a,{danger:!0,shape:"circle",icon:Object(x.jsx)(ue.a,{}),onClick:function(){return o(e)}})})}}],o=function(e){Be({title:"\u4f60\u786e\u5b9a\u8981\u5220\u9664?",icon:Object(x.jsx)(de.a,{}),onOk:function(){l(e)},onCancel:function(){}})},l=function(e){i(n.filter((function(t){return t.id!==e.id}))),m.a.delete("/categories/".concat(e.id))},b=c.a.createContext(null);return Object(x.jsx)("div",{children:Object(x.jsx)(le.a,{dataSource:n,columns:s,pagination:{pageSize:5},rowKey:function(e){return e.id},components:{body:{row:function(e){e.index;var t=Object(Pe.a)(e,Fe),n=u.a.useForm(),a=Object(y.a)(n,1)[0];return Object(x.jsx)(u.a,{form:a,component:!1,children:Object(x.jsx)(b.Provider,{value:a,children:Object(x.jsx)("tr",Object(v.a)({},t))})})},cell:function(e){var t=e.title,n=e.editable,c=e.children,i=e.dataIndex,r=e.record,s=e.handleSave,o=Object(Pe.a)(e,He),l=Object(a.useState)(!1),j=Object(y.a)(l,2),O=j[0],h=j[1],f=Object(a.useRef)(null),p=Object(a.useContext)(b);Object(a.useEffect)((function(){O&&f.current.focus()}),[O]);var m=function(){h(!O),p.setFieldsValue(Object(Le.a)({},i,r[i]))},g=function(){var e=Object(De.a)(Je.a.mark((function e(){var t;return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.validateFields();case 3:t=e.sent,m(),s(Object(v.a)(Object(v.a)({},r),t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),S=c;return n&&(S=O?Object(x.jsx)(u.a.Item,{style:{margin:0},name:i,rules:[{required:!0,message:"".concat(t," is required.")}],children:Object(x.jsx)(d.a,{ref:f,onPressEnter:g,onBlur:g})}):Object(x.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:m,children:c})),Object(x.jsx)("td",Object(v.a)(Object(v.a)({},o),{},{children:S}))}}}})})},"/news-manage/preview/:id":function(e){var t=Object(a.useState)(null),n=Object(y.a)(t,2),c=n[0],i=n[1];Object(a.useEffect)((function(){m.a.get("/news/".concat(e.match.params.id,"?_expand=category&_expand=role")).then((function(e){i(e.data)}))}),[e.match.params.id]);var r=["black","orange","green","red"];return Object(x.jsx)("div",{children:c&&Object(x.jsxs)("div",{children:[Object(x.jsx)(S.a,{onBack:function(){return window.history.back()},title:c.title,subTitle:c.category.title,children:Object(x.jsxs)(w.b,{size:"small",column:3,children:[Object(x.jsx)(w.b.Item,{label:"\u521b\u5efa\u8005",children:c.author}),Object(x.jsx)(w.b.Item,{label:"\u521b\u5efa\u65f6\u95f4",children:k()(c.createTime).format("YYYY/MM/DD HH:mm:ss")}),Object(x.jsx)(w.b.Item,{label:"\u53d1\u5e03\u65f6\u95f4",children:c.publishTime?k()(c.publishTime).format("YYYY/MM/DD HH:mm:ss"):"-"}),Object(x.jsx)(w.b.Item,{label:"\u533a\u57df",children:c.region}),Object(x.jsx)(w.b.Item,{label:"\u5ba1\u6838\u72b6\u6001",children:Object(x.jsx)("span",{style:{color:r[c.auditState]},children:["\u672a\u5ba1\u6838","\u5ba1\u6838\u4e2d","\u5df2\u901a\u8fc7","\u672a\u901a\u8fc7"][c.auditState]})}),Object(x.jsx)(w.b.Item,{label:"\u53d1\u5e03\u72b6\u6001",children:Object(x.jsx)("span",{style:{color:r[c.publishState]},children:["\u672a\u53d1\u5e03","\u5f85\u53d1\u5e03","\u5df2\u4e0a\u7ebf","\u5df2\u4e0b\u7ebf"][c.publishState]})}),Object(x.jsx)(w.b.Item,{label:"\u8bbf\u95ee\u6570\u91cf",children:c.view}),Object(x.jsx)(w.b.Item,{label:"\u70b9\u8d5e\u6570\u91cf",children:c.star}),Object(x.jsx)(w.b.Item,{label:"\u8bc4\u8bba\u6570\u91cf",children:"0"})]})}),Object(x.jsx)("div",{dangerouslySetInnerHTML:{__html:c.content},style:{margin:"0 24px",border:"1px solid gray"}})]})})},"/news-manage/update/:id":function(e){var t=Object(a.useState)(0),n=Object(y.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)([]),s=Object(y.a)(r,2),o=s[0],b=s[1],O=Object(a.useState)({}),h=Object(y.a)(O,2),f=h[0],p=h[1],g=Object(a.useState)(""),w=Object(y.a)(g,2),I=w[0],k=w[1],C=Object(a.useRef)(null);Object(a.useEffect)((function(){m.a.get("/categories").then((function(e){b(e.data)}))}),[]),Object(a.useEffect)((function(){m.a.get("/news/".concat(e.match.params.id,"?_expand=category&_expand=role")).then((function(e){var t=e.data,n=t.title,a=t.categoryId,c=t.content;C.current.setFieldsValue({title:n,categoryId:a}),k(c)}))}),[e.match.params.id]);var N=function(t){m.a.patch("/news/".concat(e.match.params.id),Object(v.a)(Object(v.a)({},f),{},{content:I,auditState:t})).then((function(n){e.history.push(0===t?"/news-manage/draft":"/audit-manage/list"),ge.a.info({message:"\u901a\u77e5",description:"\u60a8\u53ef\u4ee5\u5230".concat(0===t?"\u8349\u7a3f\u7bb1":"\u5ba1\u6838\u5217\u8868","\u4e2d\u67e5\u770b\u60a8\u7684\u65b0\u95fb"),placement:"bottomRight"})}))};return Object(x.jsxs)("div",{children:[Object(x.jsx)(S.a,{className:"site-page-header",title:"\u66f4\u65b0\u65b0\u95fb",onBack:function(){return e.history.goBack()},subTitle:"This is a subtitle"}),Object(x.jsxs)(xe.a,{current:c,children:[Object(x.jsx)(Ke,{title:"\u57fa\u672c\u4fe1\u606f",description:"\u65b0\u95fb\u6807\u9898\uff0c\u65b0\u95fb\u5206\u7c7b"}),Object(x.jsx)(Ke,{title:"\u65b0\u95fb\u5185\u5bb9",description:"\u65b0\u95fb\u4e3b\u4f53\u5185\u5bb9"}),Object(x.jsx)(Ke,{title:"\u65b0\u95fb\u63d0\u4ea4",description:"\u4fdd\u5b58\u8349\u7a3f\u6216\u8005\u63d0\u4ea4\u5ba1\u6838"})]}),Object(x.jsxs)("div",{style:{marginTop:"50px"},children:[Object(x.jsx)("div",{className:0===c?"":ye.a.active,children:Object(x.jsxs)(u.a,Object(v.a)(Object(v.a)({},{labelCol:{span:4},wrapperCol:{span:20}}),{},{name:"basic",ref:C,children:[Object(x.jsx)(u.a.Item,{label:"\u65b0\u95fb\u6807\u9898",name:"title",rules:[{required:!0,message:"Please input your username!"}],children:Object(x.jsx)(d.a,{})}),Object(x.jsx)(u.a.Item,{label:"\u65b0\u95fb\u5206\u7c7b",name:"categoryId",rules:[{required:!0,message:"Please input your username!"}],children:Object(x.jsx)(he.a,{children:o.map((function(e){return Object(x.jsx)(Ae,{value:e.id,children:e.title},e.id)}))})})]}))}),Object(x.jsx)("div",{className:1===c?"":ye.a.active,children:Object(x.jsx)(_e,{getContent:function(e){k(e)},content:I})}),Object(x.jsx)("div",{className:2===c?"":ye.a.active})]}),Object(x.jsxs)("div",{style:{marginTop:"50px"},children:[2===c&&Object(x.jsxs)("span",{children:[Object(x.jsx)(j.a,{type:"primary",onClick:function(){return N(0)},children:"\u4fdd\u5b58\u8349\u7a3f\u7bb1"}),Object(x.jsx)(j.a,{danger:!0,onClick:function(){return N(1)},children:"\u63d0\u4ea4\u5ba1\u6838"})]}),c<2&&Object(x.jsx)(j.a,{type:"primary",onClick:function(){0===c?C.current.validateFields().then((function(e){p(e),i(c+1)})).catch((function(e){console.log(e)})):""===I||"<p></p>"===I.trim()?l.b.error("\u65b0\u95fb\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"):i(c+1)},children:"\u4e0b\u4e00\u6b65"}),c>0&&Object(x.jsx)(j.a,{onClick:function(){i(c-1)},children:"\u4e0a\u4e00\u6b65"})]})]})},"/audit-manage/audit":function(){var e=Object(a.useState)([]),t=Object(y.a)(e,2),n=t[0],c=t[1],i=JSON.parse(localStorage.getItem("token")),r=i.roleId,s=i.region,o=i.username;Object(a.useEffect)((function(){var e={1:"superadmin",2:"admin",3:"editor"};m.a.get("/news?auditState=1&_expand=category").then((function(t){var n=t.data;c("superadmin"===e[r]?n:[].concat(Object(Q.a)(n.filter((function(e){return e.author===o}))),Object(Q.a)(n.filter((function(t){return t.region===s&&"editor"===e[t.roleId]})))))}))}),[r,s,o]);var l=[{title:"\u65b0\u95fb\u6807\u9898",dataIndex:"title",render:function(e,t){return Object(x.jsx)("a",{href:"#/news-manage/preview/".concat(t.id),children:e})}},{title:"\u4f5c\u8005",dataIndex:"author"},{title:"\u65b0\u95fb\u5206\u7c7b",dataIndex:"category",render:function(e){return Object(x.jsx)("div",{children:e.title})}},{title:"\u64cd\u4f5c",render:function(e){return Object(x.jsxs)("div",{children:[Object(x.jsx)(j.a,{type:"primary",onClick:function(){return u(e,2,1)},children:"\u901a\u8fc7"}),Object(x.jsx)(j.a,{danger:!0,onClick:function(){return u(e,3,0)},children:"\u9a73\u56de"})]})}}],u=function(e,t,a){c(n.filter((function(t){return t.id!==e.id}))),m.a.patch("/news/".concat(e.id),{auditState:t,publishState:a}).then((function(e){ge.a.info({message:"\u901a\u77e5",description:"\u60a8\u53ef\u4ee5\u5230[\u5ba1\u6838\u7ba1\u7406/\u5ba1\u6838\u5217\u8868]\u4e2d\u67e5\u770b\u60a8\u7684\u65b0\u95fb\u7684\u5ba1\u6838\u72b6\u6001",placement:"bottomRight"})}))};return Object(x.jsx)("div",{children:Object(x.jsx)(le.a,{dataSource:n,columns:l,pagination:{pageSize:5},rowKey:function(e){return e.id}})})},"/audit-manage/list":function(e){var t=Object(a.useState)([]),n=Object(y.a)(t,2),c=n[0],i=n[1],r=JSON.parse(localStorage.getItem("token")).username;Object(a.useEffect)((function(){m()("/news?author=".concat(r,"&auditState_ne=0&publishState_lte=1&_expand=category")).then((function(e){console.log(e.data),i(e.data)}))}),[r]);var s=[{title:"\u65b0\u95fb\u6807\u9898",dataIndex:"title",render:function(e,t){return Object(x.jsx)("a",{href:"#/news-manage/preview/".concat(t.id),children:e})}},{title:"\u4f5c\u8005",dataIndex:"author"},{title:"\u65b0\u95fb\u5206\u7c7b",dataIndex:"category",render:function(e){return Object(x.jsx)("div",{children:e.title})}},{title:"\u5ba1\u6838\u72b6\u6001",dataIndex:"auditState",render:function(e){return Object(x.jsx)(re.a,{color:["","orange","green","red"][e],children:["\u8349\u7a3f\u7bb1","\u5ba1\u6838\u4e2d","\u5df2\u901a\u8fc7","\u672a\u901a\u8fc7"][e]})}},{title:"\u64cd\u4f5c",render:function(e){return Object(x.jsxs)("div",{children:[1===e.auditState&&Object(x.jsx)(j.a,{onClick:function(){return o(e)},children:"\u64a4\u9500"}),2===e.auditState&&Object(x.jsx)(j.a,{danger:!0,onClick:function(){return u(e)},children:"\u53d1\u5e03"}),3===e.auditState&&Object(x.jsx)(j.a,{type:"primary",onClick:function(){return l(e)},children:"\u66f4\u65b0"})]})}}],o=function(e){i(c.filter((function(t){return t.id!==e.id}))),m.a.patch("/news/".concat(e.id),{auditState:0}).then((function(e){ge.a.info({message:"\u901a\u77e5",description:"\u60a8\u53ef\u4ee5\u5230\u8349\u7a3f\u7bb1\u4e2d\u67e5\u770b\u60a8\u7684\u65b0\u95fb",placement:"bottomRight"})}))},l=function(t){e.history.push("/news-manage/update/".concat(t.id))},u=function(t){m.a.patch("/news/".concat(t.id),{publishState:2,publishTime:Date.now()}).then((function(t){e.history.push("/publish-manage/published"),ge.a.info({message:"\u901a\u77e5",description:"\u60a8\u53ef\u4ee5\u5230\u3010\u53d1\u5e03\u7ba1\u7406/\u5df2\u7ecf\u53d1\u5e03\u3011\u4e2d\u67e5\u770b\u60a8\u7684\u65b0\u95fb",placement:"bottomRight"})}))};return Object(x.jsx)("div",{children:Object(x.jsx)(le.a,{dataSource:c,columns:s,pagination:{pageSize:5},rowKey:function(e){return e.id}})})},"/publish-manage/unpublished":function(){var e=Me(1),t=e.dataSource,n=e.handlePublish;return Object(x.jsx)("div",{children:Object(x.jsx)(Ye,{dataSource:t,button:function(e){return Object(x.jsx)(j.a,{type:"primary",onClick:function(){return n(e)},children:"\u53d1\u5e03"})}})})},"/publish-manage/published":function(){var e=Me(2),t=e.dataSource,n=e.handleSunset;return Object(x.jsx)("div",{children:Object(x.jsx)(Ye,{dataSource:t,button:function(e){return Object(x.jsx)(j.a,{danger:!0,onClick:function(){return n(e)},children:"\u4e0b\u7ebf"})}})})},"/publish-manage/sunset":function(){var e=Me(3),t=e.dataSource,n=e.handleDelete;return Object(x.jsx)("div",{children:Object(x.jsx)(Ye,{dataSource:t,button:function(e){return Object(x.jsx)(j.a,{danger:!0,onClick:function(){return n(e)},children:"\u5220\u9664"})}})})}};var Xe=Object(J.b)((function(e){return{isLoading:e.LoadingReducer.isLoading}}))((function(e){var t=Object(a.useState)([]),n=Object(y.a)(t,2),c=n[0],i=n[1];Object(a.useEffect)((function(){Promise.all([m.a.get("/rights"),m.a.get("/children")]).then((function(e){i([].concat(Object(Q.a)(e[0].data),Object(Q.a)(e[1].data)))}))}),[]);var r=JSON.parse(localStorage.getItem("token")).role.rights;return Object(x.jsx)(Ve.a,{size:"large",spinning:e.isLoading,children:Object(x.jsxs)(o.d,{children:[c.map((function(e){return function(e){return Ue[e.key]&&(e.pagepermisson||e.routepermisson)}(e)&&function(e){return r.includes(e.key)}(e)?Object(x.jsx)(o.b,{path:e.key,component:Ue[e.key],exact:!0},e.key):null})),Object(x.jsx)(o.a,{from:"/",to:"/home",exact:!0}),c.length>0&&Object(x.jsx)(o.b,{path:"*",component:ce})]})})})),We=P.a.Content;function Ge(){return G.a.start(),Object(a.useEffect)((function(){G.a.done()})),Object(x.jsxs)(P.a,{children:[Object(x.jsx)(Y,{}),Object(x.jsxs)(P.a,{className:"site-layout",children:[Object(x.jsx)(X,{}),Object(x.jsx)(We,{className:"site-layout-background",style:{margin:"24px 16px",padding:24,minHeight:280,overflow:"auto"},children:Object(x.jsx)(Xe,{})})]})]})}function Qe(){return Object(x.jsx)(s.a,{children:Object(x.jsxs)(o.d,{children:[Object(x.jsx)(o.b,{path:"/login",component:g}),Object(x.jsx)(o.b,{path:"/news",component:L}),Object(x.jsx)(o.b,{path:"/detail/:id",component:N}),Object(x.jsx)(o.b,{path:"/",render:function(){return localStorage.getItem("token")?Object(x.jsx)(Ge,{}):Object(x.jsx)(o.a,{to:"/login"})}})]})})}n(821);var Ze=n(113),$e=n(237),et=n(322),tt={key:"kerwin",storage:n.n(et).a,blacklist:["LoadingReducer"]},nt=Object(Ze.a)({CollApsedReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isCollapsed:!1},t=arguments.length>1?arguments[1]:void 0,n=t.type;if("change_collapsed"===n){var a=Object(v.a)({},e);return a.isCollapsed=!a.isCollapsed,a}return e},LoadingReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;if("change_loading"===n){var c=Object(v.a)({},e);return c.isLoading=a,c}return e}}),at=Object($e.a)(tt,nt),ct=Object(Ze.b)(at),it=Object($e.b)(ct),rt=n(323);var st=function(){return Object(x.jsx)(J.a,{store:ct,children:Object(x.jsx)(rt.a,{loading:null,persistor:it,children:Object(x.jsx)(Qe,{})})})};m.a.interceptors.request.use((function(e){return ct.dispatch({type:"change_loading",payload:!0}),e}),(function(e){return Promise.reject(e)})),m.a.interceptors.response.use((function(e){return ct.dispatch({type:"change_loading",payload:!1}),e}),(function(e){return ct.dispatch({type:"change_loading",payload:!1}),Promise.reject(e)})),r.a.render(Object(x.jsx)(st,{}),document.getElementById("root"))}},[[824,1,2]]]);
//# sourceMappingURL=main.4087d6f8.chunk.js.map